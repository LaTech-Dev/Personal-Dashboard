<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Work Task</title>
  <style>
    body {
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h2 {
      text-align: center;
    }

    #inputWrapper, #clearWrapper {
      text-align: center;
      margin: 20px;
    }

    input, button {
      padding: 10px;
      margin: 5px;
      font-size: 1rem;
    }

    table {
      width: 80%;
      margin: 0 auto;
      border-collapse: collapse;
      background-color: white;
    }

    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: left;
    }

    th {
      background-color: #FFFACD;
      color: blue;
      text-decoration: underline;
    }

    button {
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Work Assignment Track</h2>
<center>
<a href='Personal Dashboard.html' style="margin-right: 15px;">
RETURN </a>
<a href='Personal Tasks.html' style="margin-right: 15px;">
 NON-CS TASKS</a>


  <div id="inputWrapper">
    <input type="text" id="task" placeholder="Enter Task">
    <input type="due" id="due" placeholder="Enter Due Date">
    <button onclick="addRow()">Add Row</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Task</th>
        <th>Due Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
<br><br><br><br>
  <div id="clearWrapper">
    <button onclick="clearAll()">Clear All</button>
  </div>

  <script>
    window.onload = function () {
      const savedData = JSON.parse(localStorage.getItem('tableData')) || [];
      savedData.forEach(entry => {
        addRowToTable(entry.task, entry.due);
      });
    };

    function addRow() {
      const taskInput = document.getElementById('task');
      const dueInput = document.getElementById('due');
      const task = taskInput.value.trim();
      const due = dueInput.value.trim();

      if (!task || !due) {
        alert('Please fill in both fields.');
        return;
      }

      saveToLocalStorage(task, due);
      addRowToTable(task, due);

      taskInput.value = '';
      dueInput.value = '';
    }

    function addRowToTable(task, due) {
      const tableBody = document.getElementById('tableBody');
      const newRow = document.createElement('tr');

      newRow.innerHTML = `
        <td>${escapeHtml(task)}</td>
        <td>${escapeHtml(due)}</td>
        <td><button onclick="removeRow(this)">Finished</button></td>
      `;

      newRow.dataset.task = task;
      newRow.dataset.due = due;

      tableBody.appendChild(newRow);
    }

    function saveToLocalStorage(task, due) {
      const data = JSON.parse(localStorage.getItem('tableData')) || [];
      data.push({ task, due });
      localStorage.setItem('tableData', JSON.stringify(data));
    }

    function removeRow(button) {
      const row = button.closest('tr');
      const task = row.dataset.task;
      const due = row.dataset.due;

      row.remove();

      let data = JSON.parse(localStorage.getItem('tableData')) || [];
      data = data.filter(entry => !(entry.task === task && entry.due === due));
      localStorage.setItem('tableData', JSON.stringify(data));
    }

    function clearAll() {
      if (confirm("Are you sure you want to clear all tasks?")) {
        localStorage.removeItem('tableData');
        document.getElementById('tableBody').innerHTML = '';
      }
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>

</body>
</html>
